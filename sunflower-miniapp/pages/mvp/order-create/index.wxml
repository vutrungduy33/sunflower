<view class="create-page">
  <mvp-nav-actions />

  <view class="mvp-state mvp-state--loading state-card" wx:if="{{loading}}">订单信息加载中...</view>

  <view class="mvp-state state-card" wx:elif="{{errorMessage}}">
    <view class="mvp-state__title">订单页加载失败</view>
    <view class="mvp-state__desc">{{errorMessage}}</view>
    <view class="mvp-state__action">
      <t-button size="small" theme="primary" bindtap="retryLoadPageData">重新加载</t-button>
    </view>
  </view>

  <block wx:elif="{{room}}">
    <view class="create-section">
      <view class="section-title">房型信息</view>
      <view class="room-name">{{room.name}}</view>
      <view class="mvp-muted">{{checkInDate}} 至 {{checkOutDate}} · 共 {{nights}} 晚</view>
      <view class="price-line">总价 <text class="price-value">¥{{totalAmount}}</text></view>
    </view>

    <view class="create-section">
      <view class="section-title">入住信息</view>
      <view class="field">
        <text class="field-label">入住人姓名</text>
        <input class="field-input" placeholder="请输入姓名" value="{{form.guestName}}" data-field="guestName" bindinput="onInput" />
      </view>
      <view class="field">
        <text class="field-label">手机号</text>
        <input
          class="field-input"
          type="number"
          maxlength="11"
          placeholder="用于入住联系"
          value="{{form.guestPhone}}"
          data-field="guestPhone"
          bindinput="onInput"
        />
      </view>
      <view class="field">
        <text class="field-label">预计到店时间</text>
        <input class="field-input" placeholder="例如 18:00" value="{{form.arrivalTime}}" data-field="arrivalTime" bindinput="onInput" />
      </view>
      <view class="field">
        <text class="field-label">备注</text>
        <textarea
          class="field-textarea"
          placeholder="可填写接驳需求、亲子用品需求等"
          value="{{form.remark}}"
          data-field="remark"
          bindinput="onInput"
        ></textarea>
      </view>
    </view>

    <view class="submit-panel">
      <t-button theme="primary" loading="{{submitting}}" block="true" bindtap="submitOrder">提交订单并支付</t-button>
    </view>
  </block>
  <view class="mvp-empty" wx:else>暂无房型信息，请返回上一页重新选择。</view>
</view>
